version: "3"
services:
  eureka-server:
    build: eureka-server/
    container_name: eureka-server
    restart: always

#    network_mode: "host"

    hostname: localhost
    ports:
      - 8076:8076
#  api-gateway:
#    build: api-gateway/
#    container_name: api-gateway
#    depends_on:
#      - eureka-server
#    restart: always
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - "8086:8086"

#  product-webapp:
#    build: product-webapp/
#    image: product-webapp
#    depends_on:
#      - eureka-server
#      - api-gateway
#    restart: always
#    container_name: product-webapp
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - "8895:8895"

  user-authentication-service:
    image: user-authentication-service
    build: user-authentication-service/
    container_name: user-authentication-service
    ports:
      - 8095:8095
    links:
      - eureka-server
    environment:
      - eureka.client.service-url.defaultZone=http://localhost:8076/eureka/
    depends_on:
      - job4umysqldb
      - rabbitmq
  job4umysqldb:
    image: mysql:latest
    container_name: "job4umysqldb"
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=job4u
      - MYSQL_PASSWORD=root
    ports:
      - 3306:3306
#
  rabbitmq:
    image: rabbitmq:3-management
    container_name: rabbitmq
    restart: always
    ports:
      - 15672:15672
      - 5672:5672
    environment:
      AMQP_URL: 'amqp://rabbitmq?connection_attempts=5&retry_delay=5'
      RABBITMQ_DEFAULT_USER: "guest"
      RABBITMQ_DEFAULT_PASS: "guest"
#
#  skill-service:
#    build: skill-service/
#    image: skill-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - rabbitmq
#    restart: always
#    container_name: skill-service
#    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8088:8088

#  academics-service:
#    build: academics-service/
#    image: academics-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - rabbitmq
#    restart: always
#    container_name: academics-service
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8082:8082

#  experience-service:
#    build: experience-service/
#    image: experience-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - rabbitmq
#    restart: always
#    container_name: experience-service
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8084:8084
#
#  personal-detail-service:
#    build: personal-detail-service/
#    image: personal-detail-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - rabbitmq
#    restart: always
#    container_name: personal-detail-service
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8083:8083
#
#  profile-service:
#    build: profile-service/
#    image: profile-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - neo4j
#      - rabbitmq
#    restart: always
#    container_name: profile-service
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8090:8090
#
#  email-service:
#    build: email-service/
#    image: email-service
#    depends_on:
#      - eureka-server
#      - api-gateway
#      - rabbitmq
#    restart: always
#    container_name: email-service
##    network_mode: "host"
#    hostname: localhost
#    ports:
#      - 8888:8888
#
#  neo4j:
#    image: neo4j:4.2.3
#    container_name: neo4j
#    restart: always
#    ports:
#      - 7687:7687
#    environment:
#      NEO4J_AUTH: neo4j/admin
#      NEO4J_dbms_default__database: job4u
